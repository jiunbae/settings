IyEvdXNyL2Jpbi9lbnYgcHl0aG9uMwoiIiIKTGl2ZVN5bmMgQ29tcGF0aWJsZSBDaHVua2luZyBNb2R1bGUKClRoaXMgbW9kdWxlIGltcGxlbWVudHMgdGhlIHNhbWUgY2h1bmtpbmcgYW5kIGhhc2hpbmcgYWxnb3JpdGhtcyBhcyBPYnNpZGlhbiBMaXZlU3luYwp0byBlbnN1cmUgZG9jdW1lbnQgY29tcGF0aWJpbGl0eS4KCkFsZ29yaXRobSAoZnJvbSBsaXZlc3luYy1jb21tb25saWIpOgotIEhhc2g6IHh4aGFzaDY0IHdpdGggZm9ybWF0IGB7Y29udGVudH0te2xlbmd0aH1gLCBiYXNlMzYgZW5jb2RlZAotIENodW5raW5nOiBSYWJpbi1LYXJwIHJvbGxpbmcgaGFzaCB3aXRoIGNvbnRlbnQtZGVmaW5lZCBib3VuZGFyaWVzCgpSZWZlcmVuY2U6IGh0dHBzOi8vZ2l0aHViLmNvbS92cnRtcnovbGl2ZXN5bmMtY29tbW9ubGliCiIiIgoKaW1wb3J0IHh4aGFzaAoKIyBSYWJpbi1LYXJwIGNvbnN0YW50cyAoZnJvbSBsaXZlc3luYy1jb21tb25saWIpClBSSU1FID0gMzEKV0lORE9XX1NJWkUgPSA0OApNSU5fUElFQ0VfU0laRV9URVhUID0gMTI4ClNQTElUX1BJRUNFX0NPVU5UX1RFWFQgPSAyMCAgIyB+MjAgcGllY2VzIGZvciB0ZXh0CkJPVU5EQVJZX1BBVFRFUk4gPSAxCgojIENvbmZpZy1iYXNlZCBkZWZhdWx0cwpERUZBVUxUX01JTl9DSFVOS19TSVpFID0gMjAKREVGQVVMVF9NQVhfUElFQ0VfU0laRSA9IDI1MCAgIyBjdXN0b21DaHVua1NpemUgKiAxMDI0IGJ5dGVzLCBidXQgZm9yIHRleHQgd2UgdXNlIHNtYWxsZXIKCgpkZWYgaW50X3RvX2Jhc2UzNihuOiBpbnQpIC0+IHN0cjoKICAgICIiIkNvbnZlcnQgdW5zaWduZWQgaW50ZWdlciB0byBiYXNlMzYgc3RyaW5nIChtYXRjaGVzIEpTIC50b1N0cmluZygzNikpIiIiCiAgICBpZiBuID09IDA6CiAgICAgICAgcmV0dXJuICIwIgoKICAgIGNoYXJzID0gIjAxMjM0NTY3ODlhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eiIKICAgIHJlc3VsdCA9ICIiCgogICAgIyBIYW5kbGUgYXMgdW5zaWduZWQgNjQtYml0CiAgICBuID0gbiAmIDB4RkZGRkZGRkZGRkZGRkZGRgoKICAgIHdoaWxlIG4gPiAwOgogICAgICAgIHJlc3VsdCA9IGNoYXJzW24gJSAzNl0gKyByZXN1bHQKICAgICAgICBuIC8vPSAzNgoKICAgIHJldHVybiByZXN1bHQKCgpkZWYgZ2VuZXJhdGVfY2h1bmtfaWRfeHhoYXNoNjQoZGF0YTogc3RyKSAtPiBzdHI6CiAgICAiIiIKICAgIEdlbmVyYXRlIExpdmVTeW5jIGNvbXBhdGlibGUgY2h1bmsgSUQgdXNpbmcgeHhoYXNoNjQuCgogICAgQWxnb3JpdGhtIGZyb20gWFhIYXNoNjRIYXNoTWFuYWdlci5jb21wdXRlSGFzaFdpdGhvdXRFbmNyeXB0aW9uOgogICAgICAgIHh4aGFzaC5oNjQoYCR7cGllY2V9LSR7cGllY2UubGVuZ3RofWApLnRvU3RyaW5nKDM2KQoKICAgIFJldHVybnM6IGg6e2hhc2hfYmFzZTM2fQogICAgIiIiCiAgICAjIEZvcm1hdDogY29udGVudCArICItIiArIGxlbmd0aCAobWF0Y2hlcyBMaXZlU3luYyBleGFjdGx5KQogICAgaGFzaF9pbnB1dCA9IGYie2RhdGF9LXtsZW4oZGF0YSl9IgoKICAgICMgeHhoYXNoNjQgcmV0dXJucyBhIDY0LWJpdCBpbnRlZ2VyCiAgICBoYXNoX3ZhbHVlID0geHhoYXNoLnh4aDY0KGhhc2hfaW5wdXQuZW5jb2RlKCd1dGYtOCcpKS5pbnRkaWdlc3QoKQoKICAgIHJldHVybiBmImg6e2ludF90b19iYXNlMzYoaGFzaF92YWx1ZSl9IgoKCmRlZiB0b19zaWduZWQzMihuOiBpbnQpIC0+IGludDoKICAgICIiIkNvbnZlcnQgdG8gc2lnbmVkIDMyLWJpdCBpbnRlZ2VyIChtYXRjaGVzIEpTIGJpdHdpc2UgfCAwKSIiIgogICAgbiA9IG4gJiAweEZGRkZGRkZGCiAgICBpZiBuID49IDB4ODAwMDAwMDA6CiAgICAgICAgcmV0dXJuIG4gLSAweDEwMDAwMDAwMAogICAgcmV0dXJuIG4KCgpkZWYgaW11bChhOiBpbnQsIGI6IGludCkgLT4gaW50OgogICAgIiIiCiAgICBFbXVsYXRlIEphdmFTY3JpcHQgTWF0aC5pbXVsKCkgLSAzMi1iaXQgaW50ZWdlciBtdWx0aXBsaWNhdGlvbgogICAgUmV0dXJucyBzaWduZWQgMzItYml0IHJlc3VsdAogICAgIiIiCiAgICBhID0gYSAmIDB4RkZGRkZGRkYKICAgIGIgPSBiICYgMHhGRkZGRkZGRgoKICAgICMgUGVyZm9ybSBtdWx0aXBsaWNhdGlvbiB3aXRoIG92ZXJmbG93IGhhbmRsaW5nIGxpa2UgSlMKICAgIHJlc3VsdCA9IChhICogYikgJiAweEZGRkZGRkZGCgogICAgIyBDb252ZXJ0IHRvIHNpZ25lZCAzMi1iaXQKICAgIGlmIHJlc3VsdCA+PSAweDgwMDAwMDAwOgogICAgICAgIHJldHVybiByZXN1bHQgLSAweDEwMDAwMDAwMAogICAgcmV0dXJuIHJlc3VsdAoKCmRlZiBzcGxpdF9pbnRvX2NodW5rc19yYWJpbl9rYXJwKAogICAgY29udGVudDogc3RyLAogICAgYWJzb2x1dGVfbWF4X3BpZWNlX3NpemU6IGludCA9IERFRkFVTFRfTUFYX1BJRUNFX1NJWkUgKiAxMDI0LAogICAgbWluaW11bV9jaHVua19zaXplOiBpbnQgPSBERUZBVUxUX01JTl9DSFVOS19TSVpFCikgLT4gbGlzdFtzdHJdOgogICAgIiIiCiAgICBTcGxpdCBjb250ZW50IGludG8gY2h1bmtzIHVzaW5nIFJhYmluLUthcnAgcm9sbGluZyBoYXNoLgoKICAgIFRoaXMgaXMgYSBQeXRob24gcG9ydCBvZiBzcGxpdFBpZWNlc1JhYmluS2FycCBmcm9tIGxpdmVzeW5jLWNvbW1vbmxpYi4KCiAgICBBbGdvcml0aG06CiAgICAtIFJvbGxpbmcgaGFzaCBvdmVyIGEgc2xpZGluZyB3aW5kb3cgb2YgNDggYnl0ZXMKICAgIC0gV2hlbiBoYXNoICUgYXZnQ2h1bmtTaXplID09IDEsIG1hcmsgYXMgcG90ZW50aWFsIGJvdW5kYXJ5CiAgICAtIFJlc3BlY3QgbWluL21heCBjaHVuayBzaXplcwogICAgLSBEb24ndCBzcGxpdCBpbiBtaWRkbGUgb2YgVVRGLTggc2VxdWVuY2VzCiAgICAiIiIKICAgIGlmIG5vdCBjb250ZW50OgogIA==ICAgICAgcmV0dXJuIFtdCgogICAgIyBDb252ZXJ0IHRvIGJ5dGVzIGZvciBieXRlLWxldmVsIHByb2Nlc3NpbmcKICAgIGRhdGEgPSBjb250ZW50LmVuY29kZSgndXRmLTgnKQogICAgbGVuZ3RoID0gbGVuKGRhdGEpCgogICAgaWYgbGVuZ3RoID09IDA6CiAgICAgICAgcmV0dXJuIFtdCgogICAgIyBDYWxjdWxhdGUgY2h1bmsgc2l6ZSBwYXJhbWV0ZXJzIChtYXRjaGVzIExpdmVTeW5jKQogICAgbWluX3BpZWNlX3NpemUgPSBNSU5fUElFQ0VfU0laRV9URVhUCiAgICBhdmdfY2h1bmtfc2l6ZSA9IG1heChtaW5fcGllY2Vfc2l6ZSwgbGVuZ3RoIC8vIFNQTElUX1BJRUNFX0NPVU5UX1RFWFQpCiAgICBtYXhfY2h1bmtfc2l6ZSA9IG1pbihhYnNvbHV0ZV9tYXhfcGllY2Vfc2l6ZSwgYXZnX2NodW5rX3NpemUgKiA1KQogICAgbWluX2NodW5rX3NpemUgPSBtaW4obWF4KGF2Z19jaHVua19zaXplIC8vIDQsIG1pbmltdW1fY2h1bmtfc2l6ZSksIG1heF9jaHVua19zaXplKQoKICAgICMgSGFzaCBtb2R1bHVzIGZvciBib3VuZGFyeSBkZXRlY3Rpb24KICAgIGhhc2hfbW9kdWx1cyA9IGF2Z19jaHVua19zaXplCgogICAgIyBDYWxjdWxhdGUgUFJJTUVeKHdpbmRvd1NpemUtMSkgZm9yIHJvbGxpbmcgaGFzaAogICAgcF9wb3dfdyA9IDEKICAgIGZvciBfIGluIHJhbmdlKFdJTkRPV19TSVpFIC0gMSk6CiAgICAgICAgcF9wb3dfdyA9IGltdWwocF9wb3dfdywgUFJJTUUpCgogICAgY2h1bmtzID0gW10KICAgIHBvcyA9IDAKICAgIHN0YXJ0ID0gMAogICAgaGFzaF92YWwgPSAwCgogICAgd2hpbGUgcG9zIDwgbGVuZ3RoOgogICAgICAgIGJ5dGVfdmFsID0gZGF0YVtwb3NdCgogICAgICAgICMgVXBkYXRlIHJvbGxpbmcgaGFzaAogICAgICAgIGlmIHBvcyA+PSBzdGFydCArIFdJTkRPV19TSVpFOgogICAgICAgICAgICBvbGRfYnl0ZSA9IGRhdGFbcG9zIC0gV0lORE9XX1NJWkVdCiAgICAgICAgICAgIG9sZF9ieXRlX3Rlcm0gPSBpbXVsKG9sZF9ieXRlLCBwX3Bvd193KQogICAgICAgICAgICBoYXNoX3ZhbCA9IHRvX3NpZ25lZDMyKGhhc2hfdmFsIC0gb2xkX2J5dGVfdGVybSkKICAgICAgICAgICAgaGFzaF92YWwgPSBpbXVsKGhhc2hfdmFsLCBQUklNRSkKICAgICAgICAgICAgaGFzaF92YWwgPSB0b19zaWduZWQzMihoYXNoX3ZhbCArIGJ5dGVfdmFsKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGhhc2hfdmFsID0gaW11bChoYXNoX3ZhbCwgUFJJTUUpCiAgICAgICAgICAgIGhhc2hfdmFsID0gdG9fc2lnbmVkMzIoaGFzaF92YWwgKyBieXRlX3ZhbCkKCiAgICAgICAgY3VycmVudF9jaHVua19zaXplID0gcG9zIC0gc3RhcnQgKyAxCiAgICAgICAgaXNfYm91bmRhcnlfY2FuZGlkYXRlID0gRmFsc2UKCiAgICAgICAgIyBCb3VuZGFyeSBqdWRnbWVudAogICAgICAgIGlmIGN1cnJlbnRfY2h1bmtfc2l6ZSA+PSBtaW5fY2h1bmtfc2l6ZToKICAgICAgICAgICAgIyBDb252ZXJ0IHRvIHVuc2lnbmVkIGZvciBtb2R1bHVzICg+Pj4gMCBpbiBKUykKICAgICAgICAgICAgdW5zaWduZWRfaGFzaCA9IGhhc2hfdmFsICYgMHhGRkZGRkZGRgogICAgICAgICAgICBpZiB1bnNpZ25lZF9oYXNoICUgaGFzaF9tb2R1bHVzID09IEJPVU5EQVJZX1BBVFRFUk46CiAgICAgICAgICAgICAgICBpc19ib3VuZGFyeV9jYW5kaWRhdGUgPSBUcnVlCgogICAgICAgIGlmIGN1cnJlbnRfY2h1bmtfc2l6ZSA+PSBtYXhfY2h1bmtfc2l6ZToKICAgICAgICAgICAgaXNfYm91bmRhcnlfY2FuZGlkYXRlID0gVHJ1ZQoKICAgICAgICAjIEV4dHJhY3QgY2h1bmsgaWYgYm91bmRhcnkgZm91bmQKICAgICAgICBpZiBpc19ib3VuZGFyeV9jYW5kaWRhdGU6CiAgICAgICAgICAgIGlzX3NhZmVfYm91bmRhcnkgPSBUcnVlCgogICAgICAgICAgICAjIERvbid0IHNwbGl0IGluIG1pZGRsZSBvZiBVVEYtOCBtdWx0aS1ieXRlIGNoYXJhY3RlcgogICAgICAgICAgICBpZiBwb3MgKyAxIDwgbGVuZ3RoIGFuZCAoZGF0YVtwb3MgKyAxXSAmIDB4YzApID09IDB4ODA6CiAgICAgICAgICAgICAgICBpc19zYWZlX2JvdW5kYXJ5ID0gRmFsc2UKCiAgICAgICAgICAgIGlmIGlzX3NhZmVfYm91bmRhcnk6CiAgICAgICAgICAgICAgICBjaHVua19ieXRlcyA9IGRhdGFbc3RhcnQ6cG9zICsgMV0KICAgICAgICAgICAgICAgIGNodW5rcy5hcHBlbmQoY2h1bmtfYnl0ZXMuZGVjb2RlKCd1dGYtOCcsIGVycm9ycz0ncmVwbGFjZScpKQogICAgICAgICAgICAgICAgc3RhcnQgPSBwb3MgKyAxCgogICAgICAgIHBvcyArPSAxCgogICAgIyBZaWVsZCByZW1haW5pbmcgZGF0YQogICAgaWYgc3RhcnQgPCBsZW5ndGg6CiAgICAgICAgY2h1bmtfYnl0ZXMgPSBkYXRhW3N0YXJ0Omxlbmd0aF0KICAgICAgICBjaHVua3MuYXBwZW5kKGNodW5rX2J5dGVzLmRlY29kZSgndXRmLTgnLCBlcnJvcnM9J3JlcGxhY2UnKSkKCiAgICByZXR1cm4gY2h1bmtzCgoKZGVmIHByb2Nlc3NfZG9jdW1lbnQoY29udGVudDogc3RyKSAtPiB0dXBsZVtsaXN0W3N0cl0sIGxpc3Rbc3RyXV06CiAgICAiIiIKICAgIFByb2Nlc3MgZG9jdW1lbnQgaW50byBjaHVua3MgYW5kIGdlbmVyYXRlIGNodW5rIElEcy4KCiAgICBVc2VzIHh4aGFzaDY0IGZvciBjaHVuayBJRCBnZW5lcmF0aW9uIGFuZCBSYWJpbi1LYXJwIGZvciBjaHVua2luZywKICAgIG1hdGNoaW5nIE9ic2lkaWFuIExpdmVTeW5jJ3MgYWxnb3JpdGhtIGV4YWN0bHkuCgogICAgUmV0dXJuczoKICAgICAgICAoY2h1bmtfaWRzLCBjaHVua3MpIC0gTGlzdCBvZiBjaHVuayBJRHMgYW5kIHRoZWlyIGNvbnRlbnQKICAgICIiIgogICAgY2h1bmtzID0gc3BsaXRfaW50b19jaHVua3NfcmFiaW5fa2FycChjb250ZW50KQoKICAgIGNodW5rX2lkcyA9IFtdCiAgICBmb3IgY2h1bmsgaW4gY2h1bmtzOgogICAgICAgIGNodW5rX2lkID0gZ2VuZXJhdGVfY2h1bmtfaWRfeHhoYXNoNjQoY2h1bmspCiAgICAgICAgY2h1bmtfaWRzLmFwcGVuZChjaHVua19pZCkKCiAgICByZXR1cm4gY2h1bmtfaWRzLCBjaHVua3MKCgojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KIyBGYWxsYmFjazogTXVybXVySGFzaDMgKyBGTlYtMWEgKGZvciBlbnZpcm9ubWVudHMgd2l0aG91dCB4eGhhc2gpCiMgVGhpcyBpcyB0aGUgcHVyZS1KUyBmYWxsYmFjayBhbGdvcml0aG0gZnJvbSBvY3RhZ29uYWwtd2hlZWxzCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKIyBNdXJtdXJIYXNoMyBjb25zdGFudHMKQzEgPSAweGNjOWUyZDUxCkMyID0gMHgxYjg3MzU5MwpSMSA9IDE1ClIyID0gMTMKTSA9IDUKTiA9IDB4ZTY1NDZiNjQKCiMgRk5WLTFhIGNvbnN0YW50cwpFUE9DSF9GTlYxQSA9IDIxNjYxMzYyNjEKRk5WX1BSSU1FID0gMHgwMTAwMDE5MwoKCmRlZiB0b191aW50MzIobjogaW50KSAtPiBpbnQ6CiAgICAiIiJDb252ZXJ0IHRvIHVuc2lnbmVkIDMyLWJpdCBpbnRlZ2VyIiIiCiAgICByZXR1cm4gbiAmIDB4RkZGRkZGRkYKCgpkZWYgbWl4ZWRfaGFzaChzOiBzdHIsIHNlZWQ6IGludCwgZm52MWFfaGFzaDogaW50ID0gRVBPQ0hfRk5WMUEpIC0+IHR1cGxlW2ludCwgaW50XToKICAgICIiIgogICAgQ29tYmluZWQgTXVybXVySGFzaDMgKyBGTlYtMWEgaGFzaCBmdW5jdGlvbi4KICAgIEZhbGxiYWNrIGZvciB3aGVuIHh4aGFzaCBpcyBub3QgYXZhaWxhYmxlLgogICAgIiIiCiAgICBoMSA9IHNlZWQKICAgIGZudiA9IGZudjFhX2hhc2gKICAgIGxlbmd0aCA9IGxlbihzKQoKICAgIGZvciBjaGFyIGluIHM6CiAgICAgICAgazEgPSBvcmQoY2hhcikKCiAgICAgICAgIyBGTlYtMWEgc3RlcAogICAgICAgIGZudiBePSBrMQogICAgICAgIGZudiA9IHRvX3VpbnQzMihpbXVsKGZudiwgRk5WX1BSSU1FKSkKCiAgICAgICAgIyBNdXJtdXJIYXNoMyBzdGVwCiAgICAgICAgazEgPSBpbXVsKGsxLCBDMSkKICAgICAgICBrMSA9IHRvX3VpbnQzMigoazEgPDwgUjEpIHwgKHRvX3VpbnQzMihrMSkgPj4gKDMyIC0gUjEpKSkKICAgICAgICBrMSA9IGltdWwoazEsIEMyKQoKICAgICAgICBoMSBePSBrMQogICAgICAgIGgxID0gdG9fdWludDMyKChoMSA8PCBSMikgfCAodG9fdWludDMyKGgxKSA+PiAoMzIgLSBSMikpKQogICAgICAgIGgxID0gdG9fdWludDMyKGltdWwoaDEsIE0pICsgTikKCiAgICAjIEZpbmFsaXphdGlvbgogICAgaDEgXj0gbGVuZ3RoCiAgICBoMSBePSB0b191aW50MzIoaDEpID4+IDE2CiAgICBoMSA9IGltdWwoaDEsIDB4ODVlYmNhNmIpCiAgICBoMSBePSB0b191aW50MzIoaDEpID4+IDEzCiAgICBoMSA9IGltdWwoaDEsIDB4YzJiMmFlMzUpCiAgICBoMSBePSB0b191aW50MzIoaDEpID4+IDE2CgogICAgcmV0dXJuICh0b191aW50MzIoaDEpLCBmbnYpCgoKZGVmIGludF90b19iYXNlMzZfMzIobjogaW50KSAtPiBzdHI6CiAgICAiIiJDb252ZXJ0IHVuc2lnbmVkIDMyLWJpdCBpbnRlZ2VyIHRvIGJhc2UzNiBzdHJpbmciIiIKICAgIGlmIG4gPT0gMDoKICAgICAgICByZXR1cm4gIjAiCgogICAgY2hhcnMgPSAiMDEyMzQ1Njc4OWFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6IgogICAgcmVzdWx0ID0gIiIKICAgIG4gPSB0b191aW50MzIobikKCiAgICB3aGlsZSBuID4gMDoKICAgICAgICByZXN1bHQgPSBjaGFyc1tuICUgMzZdICsgcmVzdWx0CiAgICAgICAgbiAvLz0gMzYKCiAgICByZXR1cm4gcmVzdWx0CgoKZGVmIGdlbmVyYXRlX2NodW5rX2lkX2ZhbGxiYWNrKGRhdGE6IHN0cikgLT4gc3RyOgogICAgIiIiCiAgICBHZW5lcmF0ZSBjaHVuayBJRCB1c2luZyBNdXJtdXJIYXNoMyArIEZOVi0xYSAoZmFsbGJhY2spLgogICAgRm9ybWF0OiBoOnttdXJtdXJfYmFzZTM2fXtmbnYxYV9iYXNlMzZ9CiAgICAiIiIKICAgIG0gPSAxCiAgICBmID0gRVBPQ0hfRk5WMUEKCiAgICAjIEhhc2ggZm9ybWF0OiBsZW5ndGggKyBjb250ZW50IChtYXRjaGVzIGZhbGxiYWNrTWl4ZWRIYXNoRWFjaCkKICAgIGhhc2hfaW5wdXQgPSBmIntsZW4oZGF0YSl9e2RhdGF9IgogICAgbSwgZiA9IG1peGVkX2hhc2goaGFzaF9pbnB1dCwgbSwgZikKCiAgICByZXR1cm4gZiJoOntpbnRfdG9fYmFzZTM2XzMyKG0pfXtpbnRfdG9fYmFzZTM2XzMyKGYpfSIKCgojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KIyBUZXN0CiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgIHRlc3RfY29udGVudCA9ICIiIi0tLQpjcmVhdGVkOiAyMDI2LTAxLTMxVDIwOjQ5OjI4CnRhZ3M6IFtpbmRleCwgbW9jLCBhdXRvLWdlbmVyYXRlZF0KLS0tCgojIFRlc3QgRG9jdW1lbnQKClRoaXMgaXMgYSB0ZXN0IGRvY3VtZW50IGZvciBMaXZlU3luYyBjb21wYXRpYmxlIGNodW5raW5nLgoiIiIKCiAgICBwcmludCgiPSIgKiA2MCkKICAgIHByaW50KCJMaXZlU3luYyBDb21wYXRpYmxlIENodW5raW5nIFRlc3QiKQogICAgcHJpbnQoIj0iICogNjApCiAgICBwcmludChmIlxuQ29udGVudCBsZW5ndGg6IHtsZW4odGVzdF9jb250ZW50KX0gY2hhcnMiKQogICAgcHJpbnQoZiJDb250ZW50IGJ5dGVzOiB7bGVuKHRlc3RfY29udGVudC5lbmNvZGUoJ3V0Zi04JykpfSBieXRlcyIpCgogICAgIyBUZXN0IHh4aGFzaDY0IHZlcnNpb24KICAgIHByaW50KCJcbi0tLSB4eGhhc2g2NCAoUHJpbWFyeSBBbGdvcml0aG0pIC0tLSIpCiAgICBjaHVua19pZHMsIGNodW5rcyA9IHByb2Nlc3NfZG9jdW1lbnQodGVzdF9jb250ZW50KQogICAgcHJpbnQoZiJOdW1iZXIgb2YgY2h1bmtzOiB7bGVuKGNodW5rcyl9IikKCiAgICBmb3IgaSwgKGNpZCwgY2h1bmspIGluIGVudW1lcmF0ZSh6aXAoY2h1bmtfaWRzLCBjaHVua3MpKToKICAgICAgICBwcmV2aWV3ID0gY2h1bmtbOjQwXS5yZXBsYWNlKCdcbicsICdcXG4nKQogICAgICAgIHByaW50KGYiICBDaHVuayB7aX06IHtjaWR9IikKICAgICAgICBwcmludChmIiAgICBTaXplOiB7bGVuKGNodW5rKX0gY2hhcnMgLyB7bGVuKGNodW5rLmVuY29kZSgndXRmLTgnKSl9IGJ5dGVzIikKICAgICAgICBwcmludChmIiAgICBQcmV2aWV3OiB7cHJldmlld30uLi4iKQoKICAgICMgVGVzdCBzaW5nbGUgY2h1bmsgaGFzaAogICAgcHJpbnQoIlxuLS0tIFNpbmdsZSBDaHVuayBIYXNoIFRlc3QgLS0tIikKICAgIHRlc3Rfc3RyID0gIkhlbGxvLCBXb3JsZCEiCiAgICBoYXNoX2lkID0gZ2VuZXJhdGVfY2h1bmtfaWRfeHhoYXNoNjQodGVzdF9zdHIpCiAgICBwcmludChmIklucHV0OiAne3Rlc3Rfc3RyfSciKQogICAgcHJpbnQoZiJIYXNoIGlucHV0OiAne3Rlc3Rfc3RyfS17bGVuKHRlc3Rfc3RyKX0nIikKICAgIHByaW50KGYiQ2h1bmsgSUQ6IHtoYXNoX2lkfSIpCgogICAgIyBWZXJpZnkgd2l0aCByYXcgeHhoYXNoCiAgICByYXdfaGFzaCA9IHh4aGFzaC54eGg2NChmInt0ZXN0X3N0cn0te2xlbih0ZXN0X3N0cil9Ii5lbmNvZGUoJ3V0Zi04JykpLmludGRpZ2VzdCgpCiAgICBwcmludChmIlJhdyB4eGhhc2g2NDoge3Jhd19oYXNofSIpCiAgICBwcmludChmIkJhc2UzNjoge2ludF90b19iYXNlMzYocmF3X2hhc2gpfSIpCg==